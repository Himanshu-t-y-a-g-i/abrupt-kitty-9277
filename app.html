<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application | IndiaToday</title>
    <link rel="stylesheet" href="./styles/navbar.css">
    <link rel="icon" href="./images/cirlce favi-icon.png">
    <!-- <link rel="stylesheet" href="./styles/footer.css"> -->
    <style>
        #footer {
            /* border: 2px solid red; */
            /* display: flex; */
            background-color: black;

        }

        #con {
            width: 90%;
            margin: auto;
            /* border: 2px solid red; */
            display: flex;
            /* background-color: black; */
        }

        .box {
            width: 200px;
            margin-left: 30px;
            /* border: 2px solid red; */
        }

        .box a {
            line-height: 20px;
            font-size: 12px;
            font-weight: 400;
            font-style: normal;
            font-family: 'Open Sans', sans-serif;
            text-decoration: none;
            color: gray;
        }

        .box h3 {
            margin-top: 30px;
            line-height: 18px;
            font-size: 14px;
            font-weight: 500;
            font-style: normal;
            font-family: 'Open Sans', sans-serif;
            color: white;
        }

        .box a:hover {
            color: yellow;
        }

        .end {
            /* border: 2px solid blue; */
            width: 100%;
            height: 120px;
            margin-top: -20px;

            /* background-color: black; */
        }

        .end>h3 {
            text-align: center;
            color: white;
            font-family: 'Open Sans', sans-serif;
            font-size: .75rem;
            line-height: 1rem;

        }

        #img {
            /* border: 2px solid red; */
            display: flex;
            justify-content: center;
            gap: .625rem;
            margin-top: .625rem;
        }
    </style>
    <link rel="stylesheet" href="./styles/app.css">
</head>

<body>
    <nav id="nav"></nav>
    <div id="mainAppBody">
        <p>News/Our Apps</p>
        <div id="listSection">


            <div>
                <img src="https://smedia2.intoday.in/indiatoday/images/app/indiatoday-app.png" alt="No img found">
                <h4>AVAILABLE ON</h4>
                <div>
                    <a href="https://play.google.com/store/apps/details?id=com.indiatoday&hl=en"><img
                            src="https://smedia2.intoday.in/indiatoday/images/app/android-img.png"
                            alt="No img found"></a>
                    <a href="https://itunes.apple.com/in/app/india-today-live/id510733452?mt=8"><img
                            src="https://smedia2.intoday.in/indiatoday/images/app/ios.png" alt="No img found"></a>
                </div>
            </div>


            <div>
                <h1>THE INDIA TODAY APP</h1>
                <ul>
                    <li>
                        Since 1975, India Today has stood for insight, accuracy, thoroughness and a well-rounded
                        perspective on burning topics.
                    </li>
                    <li>
                        India Today TV has set the Gold Standard in Journalism with exceptional clarity in coverage and
                        sharp, to-the-point debates and analyses.
                    </li>
                    <li>
                        India Today app brings to you the latest news from India and around the world about politics,
                        technology, sports, lifestyle, etc. Also, track the latest from Bollywood, Hollywood, regional
                        cinema and TV soaps.
                    </li>
                    <li>
                        Live stream of all TV Today Network channels.
                    </li>
                    <li>
                        Photogalleries from India and the world.
                    </li>
                    <li>India Today magazine reportage, exclusive columns and in-depth analyses.

                    </li>
                    <li>
                        All this and more available on the touch of your fingertip. Download the experience for your
                        mobile device.
                    </li>
                </ul>
                <p><a href="https://play.google.com/store/apps/details?id=com.indiatoday&hl=en">Download Android App</a>
                    | <a href="https://itunes.apple.com/in/app/india-today-live/id510733452?mt=8">Download iOS app</a>
                </p>
            </div>
        </div>
        <div id="otherApps">
            <h1>RELATED APPS FROM THE INDIA TODAY GROUP</h1>
            <div>
                <div class="app">
                    <img src="https://smedia2.intoday.in/indiatoday/images/app/aajtak-app.png" alt="No img found">
                    <h4>AVAILABLE ON</h4>
                    <div>
                        <a href="https://play.google.com/store/apps/details?id=in.AajTak.headlines"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/android-img.png"
                                alt="No img found"></a>
                        <a href="https://itunes.apple.com/in/app/aaj-tak/id493319791?mt=8"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/ios.png" alt="No img found"></a>
                    </div>
                    <div>
                        <h2>AAJ TAK</h2>
                        <p>India’s most popular Hindi news app from India’s No. 1 Hindi News Channel. Updated 24X7, you
                            get the breaking news first. Plus, you get all the programmes of AajTak to watch anytime,
                            anywhere. Download the Sabse Tez app.</p>
                    </div>
                </div>
                <div class="app">
                    <img src="https://smedia2.intoday.in/indiatoday/images/app/businesstoday-app.png"
                        alt="No img found">
                    <h4>AVAILABLE ON</h4>
                    <div>
                        <a href="https://play.google.com/store/apps/details?id=com.businesstoday"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/android-img.png"
                                alt="No img found"></a>
                        <a href="https://itunes.apple.com/in/app/business-today-live/id510626540?mt=8"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/ios.png" alt="No img found"></a>
                    </div>
                    <div>
                        <h2>BUSINESS TODAY</h2>
                        <p>App you can profit from. In-depth coverage of business and economy, sharp analysis of
                            business trends from Business Today, India’s premier business magazine.</p>
                    </div>
                </div>
                <div class="app">
                    <img src="https://smedia2.intoday.in/indiatoday/images/app/mailtoday-app.png" alt="No img found">
                    <h4>AVAILABLE ON</h4>
                    <div>
                        <a href="https://play.google.com/store/apps/details?id=com.readwhere.whitelabel.mailtoday"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/android-img.png"
                                alt="No img found"></a>
                        <a href="https://itunes.apple.com/us/app/mail-today/id839589460?mt=8"><img
                                src="https://smedia2.intoday.in/indiatoday/images/app/ios.png" alt="No img found"></a>
                    </div>
                    <div>
                        <h2>MAIL TODAY</h2>
                        <p>Mail Today is a morning daily newspaper with a difference. Clean, lucid and straight-talking,
                            Mail Today marries the credibility and authenticity of the India Today Group with the Daily
                            Mail's international standards. Now delivered to your mobile device. Download. It’s free.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer"></div>
</body>

</html>
<script type="module">

    // Navbar and scroll to top init

    import navbar from "./components/navbar.js"

    document.querySelector("#nav").innerHTML = navbar();

    let scroller = document.getElementById("scrollToTop");

    let scrolled = () => {
        let pos = document.documentElement.scrollTop;
        let a = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        let b = Math.round((pos * 100) / a);
        if (b > 15) {
            scroller.style.display = "block";
        } else {
            scroller.style.display = "none";
        }
    }

    window.addEventListener("scroll", () => {
        scrolled();
    })

    window.addEventListener("load", () => {
        scrolled();
    })

    let scrollTop = () => {
        window.scrollTo({
            top: 0,
            left: 0,
            behavior: "smooth"
        });
    }

    document.querySelector("#scrollToTop").addEventListener("click", () => {
        scrollTop();
    })

    // main menu drop down

    let showDropDown = () => {
        let dropDown = document.getElementById("dropDownSec");
        dropDown.style.display = "flex";
    }

    let hideDropDown = () => {
        let dropDown = document.getElementById("dropDownSec");
        dropDown.style.display = "none";
    }

    document.getElementById("dropDown").addEventListener("click", () => {
        showDropDown();
    })

    document.getElementById("dropDown").addEventListener("dblclick", () => {
        hideDropDown();
    })

    // search functionality
    let search = document.getElementById("search");

    let submitted = async (query) => {
        try {
            // let key = "pub_105542082a44e012a61301d0ea8bb55421a19";
            // let res = await fetch(`https://newsdata.io/api/1/news?apikey=${key}&q=${query}`);
            let key = "3a2ea667e2344d5e9ba3e7f0a7a25feb";
            let res = await fetch(`https://newsapi.org/v2/top-headlines?q=${query}&apiKey=${key}`);
            let data = await res.json();
            let result = data.articles;
            localStorage.setItem("searchData", JSON.stringify(result));
            window.location.href = "./search.html";
        } catch (error) {
            console.log("Error: ", error);
        }
    }

    search.addEventListener("search", () => {
        let query = search.value;
        console.log("Successful")
        submitted(query);
    })
    // navbar and scroll to top end

        // displaying user name
        let logInStatus=localStorage.getItem("loggedInStatus");
    let userName = localStorage.getItem("loggedInUsername");
    let loginDetail = document.getElementById("userDetails");
    if(logInStatus === "true"){
        // console.log("loggedIn", userName)
        document.querySelector("#profile").addEventListener("mouseenter",()=>{
            showProfile();
        })
        function showProfile(){
            loginDetail.style.display = "block";
        }
        document.querySelector("#profile").addEventListener("mouseleave",()=>{
            hideProfile();
        })
        function hideProfile(){
            loginDetail.style.display = "none";
        }
        loginDetail.innerHTML = "";

        let h3 = document.createElement("h3");
        h3.innerText = "Welcome, " + userName;

        let button = document.createElement("button");
        button.innerText = "Sign Out";

        button.addEventListener("click",()=>{
            signOut();
        })
        loginDetail.append(h3, button);
    }

    function signOut(){
        localStorage.removeItem("loggedInStatus");
        localStorage.removeItem("loggedInUsername");
    }

    // footer section
    import footer from "./components/foot.js";
    document.getElementById("footer").innerHTML = footer();
    // footer section end
</script>